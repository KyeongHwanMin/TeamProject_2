<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 
  <mapper namespace="attraction">
  
  <!-- 관광지 찜하기 관련 내용 -->
  
    <!-- 관광지 찜하기 count  -->
  <select id="attCount" resultType="int" parameterType="String">
  	   select count(*) from myAttraction where user_id=#{user_id}
  	</select>

  <!--  관광지 불러오기  -->
   <select id="selectAtt" resultType="attractionDTO"  parameterType="String"> 
  select * from attraction where place_no= #{place_no}
   </select> 
  
  <!--  관광지 찜해서 insert  -->
	<insert id="insertAtt" parameterType="attBookMarkDTO">
  	   insert into myAttraction(MYATT, USER_ID, place_no, place_name, place_address, place_content, place_category, place_local, place_img) 
  	   values(MYATT_seq.NEXTVAL, #{user_id}, #{place_no}, #{place_name}, #{place_address}, 
  	   		#{place_content}, #{place_category}, #{place_local}, #{place_img)
  	</insert>
   
  <!--  찜한 관광지 노출 -->
	<select id="myAtt" resultType="attBookMarkDTO" parameterType="String">
  	   select * from myAttraction where user_id=#{user_id}
  	</select>  
  
  <!-- 마이페이지에서 찜한 관광지 삭제)-->
  <delete id="deleteMyAtt" parameterType="String">
 	 delete from myAttraction where place_no = #{place_no}
  </delete>
  
  
  <!-- 관광지 메인페이지(attractionSearchForm) 페이징 -->
	<select id="attcount" resultType="int">
  	   select count(*) from attraction 
  	</select>
	
	<select id="attList" resultType="attractionDTO" parameterType="hashmap" >
  	   select place_no, place_name, place_address, place_content, place_category, place_local, place_img, x, y , r 
	from ( select place_no, place_name, place_address, place_content, place_category, place_local, place_img, x, y , rownum r 
	from ( select place_no, place_name, place_address, place_content, place_category, place_local, place_img, x, y 
	from attraction)) <![CDATA[where r >= #{startRow} and r <= #{endRow}]]>
   </select>
 
   <!--  관광지 지역  -->
  <select id="jejusi" resultType="attractionDTO">   
  	select * from attraction where place_local='jejusi'
  </select>

  <select id="seoquiposi" resultType="attractionDTO">   
  	select * from attraction where place_local='seoquiposi'
  </select>
  
   <select id="jungmun" resultType="attractionDTO">  
  	select * from attraction where place_local='jungmun'
  </select>
  
    <select id="jejuairport" resultType="attractionDTO"> 
  	select * from attraction where place_local='jejuairport'
  </select>
  
    <select id="aweol" resultType="attractionDTO"> 
  	select * from attraction where place_local='aweol'
  </select>
  
   <select id="pyoseon" resultType="attractionDTO"> 
  	select * from attraction where place_local='pyoseon'
  </select>
  
	<select id="hamduk" resultType="attractionDTO"> 
  	select * from attraction where place_local='hamduk'
  </select>
  
  <!--  관광지 유형  -->
  
  <!--  역사/문화  -->
  <select id="history" resultType="attractionDTO">
  select * from attraction where place_category='history'
  </select>
  
    <!--  자연  -->
  <select id="nature" resultType="attractionDTO">
  select * from attraction where place_category='nature'
  </select>
  
    <!--  레저/체험  -->
  <select id="leisure" resultType="attractionDTO">
  select * from attraction where place_category='leisure'
  </select>
  
    <!--  힐링  -->
  <select id="healing" resultType="attractionDTO">
  select * from attraction where place_category='healing'
  </select>
  </mapper>
  