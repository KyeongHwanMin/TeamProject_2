<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <!--  숙소 지역  -->
  <mapper namespace="home">
  
  
   <select id="homecount" resultType="int">
  	     select count(*) from location where type='home'
  	</select>
  
  
  
  <select id="articleList" resultType="locationDTO" parameterType="hashmap" >
                select no, name, x, y, category,  address, content, location, img,  r 
from(  select no, name, x, y, category,  address, content, location, img, rownum r 
from(  select no, name, x, y, category,  address, content, location, img 
from location where type='home')) <![CDATA[where r >= #{startRow} and r <= #{endRow}]]>
   </select>
    
  
  
    <!--  서귀포에 있는 숙소 찾기 -->
  <select id="jejusi" resultType="locationDTO">   
  	select * from location where location='jejusi' and type='home'
  </select>
  
  
  <!--  서귀포에 있는 숙소 찾기 -->
  <select id="seoquiposi" resultType="locationDTO">   
  	select * from location where location='seoquiposi' and type='home'
  </select>
  
   <!--  중문에 있는 숙소 찾기 -->
   <select id="jungmun" resultType="locationDTO">  
  	select * from location where location='jungmun' and type='home'
  </select>
  
   <!--  제주공항에 있는 숙소 찾기 -->
    <select id="jejuairport" resultType="locationDTO"> 
  	select * from location where location='jejuairport' and type='home'
  </select>
  
     <!--  애월/한림/협재에 있는 숙소 찾기 -->
    <select id="aweol" resultType="locationDTO"> 
  	select * from location where location='aweol' and type='home'
  </select>
  
     <!--  표선/상산에 있는 숙소 찾기 -->
   <select id="pyoseon" resultType="locationDTO"> 
  	select * from location where location='pyoseon' and type='home'
  </select>
  
  <!-- "hamduk">함덕/김녕/세화 -->
   <select id="hamduk" resultType="locationDTO"> 
  	select * from location where location='hamduk' and type='home'
  </select>
  
  
  
  
  <!-- 숙소 마음 함 count!  -->
  <select id="count" resultType="int" parameterType="String">
  	   select count(*) from myaccomk where user_id=#{user_id}
  	</select>
  
  
  
   <!--  숙소 불러오기  -->
   <select id="selecthome" resultType="homeDTO"  parameterType="String"> 
  select * from home where home_no= #{home_no}
   </select>
  
  
  <!--  숙소 찜하기 (db 넣기)  -->
  <insert id="insertMK" parameterType="accomBookMKdto">
  	   insert into myaccomk(MYACCODE, USER_ID, HOME_NO, HOME_NAME,HOME_CONTENT, HOME_TYPE, HOME_LOCAL, HOME_IMG , HOME_ADDRESS) 
  	   values(myaccomk_seq.NEXTVAL, #{user_id, jdbcType=VARCHAR}, #{home_no, jdbcType=VARCHAR}, #{home_name, jdbcType=VARCHAR}, #{home_content, jdbcType=VARCHAR}, #{home_type, jdbcType=VARCHAR}, #{home_local, jdbcType=VARCHAR}, #{home_img, jdbcType=VARCHAR}, #{home_address, jdbcType=VARCHAR})
  	</insert>
  
  
  <!--  내가 찜한 숙소 페이지 -->
	<select id="myAccom" resultType="accomBookMKdto" parameterType="String">
  	   select * from myaccomk where user_id=#{user_id}
  	   
  	</select>
  
  
  <!-- 찜풀기 -->
  <delete id="deleteMK" parameterType="String">
 	 delete from MYACCOMK where home_no = #{home_no}
  </delete>
  
  
  <!--  숙소 수정하기 위해 해당 숙소 불러오는거  -->
   <select id="homeInfo" resultType="homeDTO" parameterType="String">
     select * from home where home_no = #{home_no}
   </select>
   
  <!-- 숙소 수정  -->
  <update id="homeUpdate" parameterType="String">
  	update home set 
  	 home_name = #{home_name, jdbcType=VARCHAR},
  	 home_address = #{home_address, jdbcType=VARCHAR},
  	 home_content = #{home_content, jdbcType=VARCHAR},
  	 x = #{x , jdbcType=VARCHAR},
  	 y = #{y, jdbcType=VARCHAR},
  	 home_type= #{home_type, jdbcType=VARCHAR},
  	 home_local= #{home_local, jdbcType=VARCHAR}
  	where home_no= #{home_no}
  </update>
  
  
  
  <!-- 숙소 삭제 -->
  <delete id="deletehome" parameterType="String">
  		delete from home where home_no= #{home_no}
  </delete>
  
  
  </mapper>
